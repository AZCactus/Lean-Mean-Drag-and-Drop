"function"!=typeof Object.assign&&(Object.assign=function(e){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),void 0===NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var scrollController=function(){var e,t,n,o,i,r,l,a,d,s,c,u,f,g,p=!1,m=!1,h=!1,v=!1,w=!1,y=function(e){if(document.body.contains(e)){var t=!1,n=!1,o=window.getComputedStyle(e,null);if(e.offsetWidth>e.clientWidth&&e.clientWidth>0){var i=parseInt(o.getPropertyValue("border-right-width"))+parseInt(o.getPropertyValue("border-left-width"));t=e.offsetWidth>e.clientWidth+i}if(e.offsetHeight>e.clientHeight&&e.clientHeight>0){var r=parseInt(o.getPropertyValue("border-right-height"))+parseInt(o.getPropertyValue("border-left-height"));n=e.offsetHeight>e.clientHeight+r}return t||n?e:y(e.parentNode)}return document.documentElement},C=function(e){s=p?e.clientY-w.top:e.clientY,c=p?e.clientX-w.left:e.clientX,b(),L()},b=function(){t=m.scrollHeight,n=m.clientHeight,o=p?m.offsetHeight:window.innerHeight,i=m.scrollWidth,r=m.clientWidth,l=p?m.offsetWidth:window.innerWidth,a=p?m.scrollTop:window.pageYOffset,d=p?m.scrollLeft:window.pageXOffset,u=20/window.devicePixelRatio,f=t-n,g=i-r,h=Math.max(u-c,u-s,c+u-r,s+u-n)},L=function(){clearTimeout(e),v=!1,d>0&&u>=c&&(v=!0,p?m.scrollLeft-=h:window.scrollTo(d-h,a)),i>l&&g>d&&c+u>=r&&(v=!0,p?m.scrollLeft+=h:window.scrollTo(d+h,a)),a>0&&u>=s&&(v=!0,p?m.scrollTop-=h:window.scrollTo(d,a-h)),t>o&&f>a&&s+u>=n&&(v=!0,p?m.scrollTop+=h:window.scrollTo(d,a+h)),v&&(b(),e=setTimeout(L,16))};return{mousemove:function(e){m=y(e.target),w=m.getBoundingClientRect(),p=m!==document.documentElement,C(e)}}},sc=new scrollController,lmdd=function(){var e={containerClass:!1,fixedItemClass:!1,draggableItemClass:!1,handleClass:!1,regulateMouseOver:!1,mirrorMaxHeight:100,mirrorMaxWidth:300,revert:!1,dragstartTimeout:200,calcInterval:200,nativeScroll:!1,protectedProperties:["padding","padding-top","padding-bottom","padding-right","padding-left","display","list-style-type","line-height"],clone:!1},t=["padding","padding-top","padding-bottom","padding-right","padding-left","display","list-style-type","line-height"],n=!1,o={lastX:window.pageXOffset,lastY:window.pageYOffset,get deltaX(){return window.pageXOffset-this.lastX},get deltaY(){return window.pageYOffset-this.lastY}},i={x:0,y:0},r={},l=!1,a=!1,d=!1,s={last:!1,tick:!1},c={currentTarget:!1,originalContainer:!1,originalNextSibling:!1,currentContainer:!1,previousContainer:!1,currentCoordinates:!1,currentPosition:!1,previousPosition:!1},u=function(){c.originalContainer=l.parentNode,c.originalNextSibling=l.nextSibling},f=function(){c.previousContainer=c.currentContainer,c.currentTarget!==s.last.target&&(c.currentTarget=s.last.target,c.currentContainer=w(s.last.target,"lmdd-container"))},g=function(){c.currentCoordinates=L(c.currentContainer?c.currentContainer:c.originalContainer)},p=function(){c.previousPosition=c.currentPosition,c.currentPosition=c.currentContainer?O(c.currentCoordinates,s.last.clientY,s.last.clientX):!1},m=function(){c.currentContainer?c.currentContainer.insertBefore(l,c.currentContainer.childNodes[c.currentPosition]):c.originalContainer.insertBefore(l,c.originalNextSibling),g(),C(r)},h=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];8===n.nodeType||3===n.nodeType&&!/\S/.test(n.nodeValue)?(e.removeChild(n),t--):1===n.nodeType&&h(n)}},v=function(e,t){var n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),i={left:parseInt(window.getComputedStyle(t,null).getPropertyValue("border-left-width")),top:parseInt(window.getComputedStyle(t,null).getPropertyValue("border-top-width"))};return{x:n.left-o.left-i.left,y:n.top-o.top-i.top}},w=function(e,t){for(var n=[],o=!1;e&&e!==document;e=e.parentNode)n.unshift(e),e.classList.contains(t)&&!o&&(o=e);return n.indexOf(r)>-1?o:!1},y=function(e){delete e.cloneRef,delete e.original,e.childNodes.forEach(function(e){y(e)})},C=function(e){1===e.nodeType&&(b(e),(e.classList.contains("lmdd-container")||e===r)&&e!==l&&(e.cloneRef.style.display="block",e.cloneRef.style.padding=0,e.childNodes.forEach(function(e){C(e)})))},b=function(e){var t,n=e.cloneRef,o=e.getBoundingClientRect();n.style.position="absolute",n.style.width=o.width+"px",n.style.height=o.height+"px",n.style.margin=0,e===r?(n.style.top=o.top+window.pageYOffset+"px",n.style.left=o.left+window.pageXOffset+"px"):(t=e===l?v(e,r):v(e,e.parentNode),n.style.transform="translate3d("+t.x+"px, "+t.y+"px,0px)")},L=function(e){var t=[];return e.childNodes.forEach(function(e,n){if(1===e.nodeType){var o=e.getBoundingClientRect();o.index=n,e.classList.contains("fixed")||t.push(o)}}),t},O=function(e,t,n){var o=e.length;if(0===o)return null;for(var i=0,r=0,l=-1;o>=i;i++){if(i===o){i--;break}if(e[i].bottom>t){i--;break}}for(;o>=r&&r!==o&&e[r].top<=t;r++);for(var a=i+1;r>=a;a++){if(a===r){l=a;break}if(e[a].left>n){l=a;break}}return l===o?e[l-1].index+1:e[l].index},x=function(){o.lastX=window.pageXOffset,o.lastY=window.pageYOffset,X(),R(),C(r),E(),B()},R=function(){a=l.cloneRef;for(var e=window.getComputedStyle?window.getComputedStyle(l,null):l.currentStyle,n=0;n<t.length;n++)a.style[t[n]]=e[t[n]];a.classList.add("lmdd-dragged"),a.classList.remove("lmdd-hidden"),r.cloneRef.appendChild(a)},N=function(){d.style.top=s.last.pageY-parseInt(d.parentNode.style.top)+o.deltaY-i.y+"px",d.style.left=s.last.pageX-parseInt(d.parentNode.style.left)+o.deltaX-i.x+"px"},E=function(){d=a.cloneNode(!0),d.classList.add("lmdd-mirror"),d.classList.remove("lmdd-dragged"),d.style.width=a.getBoundingClientRect().width+"px",d.style.height=a.getBoundingClientRect().height+"px";var e=100,t=500,n=t/a.getBoundingClientRect().width,o=e/a.getBoundingClientRect().height,l=Math.min(1,Math.max(n,o));i.x*=l,i.y*=l,d.style.transform="scale("+l+","+l+")",d.style.transformOrigin="0 0",r.cloneRef.appendChild(d),N()},T=function(){l&&r.cloneRef&&(r.cloneRef.removeChild(d),d=!1)},P=function(e,t){var n=[],o=[],i=function(e,t){t.push(e),e.childNodes.forEach(function(e){i(e,t)})};i(e,n),i(t,o);for(var r=0;r<n.length;r++)n[r].cloneRef=o[r],n[r].original=!0},B=function(){r.cloneRef&&(r.cloneRef.classList.toggle("visible-layer"),r.classList.toggle("hidden-layer"))},I=function(e){return e.preventDefault(),e.stopPropagation(),!1},X=function(){var e=r.cloneNode(!0);e.id+="-lmddClone",P(r,e),r.parentNode.appendChild(r.cloneRef)},Y=function(){B(),r.cloneRef&&r.parentNode.removeChild(r.cloneRef),y(r)},S=function(e){var t=e.getElementsByClassName(e.lmddOptions.containerClass);e.classList.contains(e.lmddOptions.containerClass)&&e.classList.add("lmdd-container");for(var n=0;n<t.length;n++)t[n].classList.add("lmdd-container");var o=e.getElementsByClassName(e.lmddOptions.draggableItemClass);for(n=0;n<o.length;n++)o[n].classList.add("lmdd-draggable")},j=function(e){for(var t=e.getElementsByClassName(e.lmddOptions.draggableItemClass),n=0;n<t.length;n++)t[n].classList.remove("lmdd-draggable");var o=e.getElementsByClassName(e.lmddOptions.containerClass);for(e.classList.remove("lmdd-container"),n=0;n<o.length;n++)o[n].classList.remove("lmdd-container")},H=function(){document.body.classList.remove("unselectable"),l&&(l.classList.remove("lmdd-hidden"),T(),Y()),r=!1,l=!1,a=!1,s.last=!1,clearInterval(n),document.removeEventListener("mousemove",k,!1),document.removeEventListener("scroll",k,!1)},W=function(){sc.mousemove(s.last);var e=!0;return s.tick===s.last?!1:(s.tick=s.last,f(),void(c.currentContainer?c.currentContainer!==c.previousContainer?(g(),p(),m()):(p(),c.currentPosition!==c.previousPosition&&m()):c.previousContainer&&e&&m()))},k=function(e){return"mouseup"===e.type?(H(),!1):0!==e.button&&"scroll"!==e.type?(H(),!1):("mousemove"===e.type&&(s.last=e,o.lastX=window.pageXOffset,o.lastY=window.pageYOffset,N()),"scroll"===e.type&&(N(),g()),void("mousedown"===e.type&&(r=this,e.preventDefault(),s.last=e,window.setTimeout(function(){if(s.last&&window.getSelection().anchorOffset===window.getSelection().focusOffset){if(r.lmddOptions.handleClass&&!e.target.classList.contains(r.lmddOptions.handleClass))return H(),!1;var t=w(e.target,"lmdd-draggable");if(!t)return H(),!1;l||(l=t,u(),l.classList.add("lmdd-hidden"),window.getSelection().removeAllRanges(),document.body.classList.add("unselectable"),i.x=e.clientX-t.getBoundingClientRect().left,i.y=e.clientY-t.getBoundingClientRect().top,x(e),document.addEventListener("mousemove",k,!1),document.body.setCapture&&document.body.setCapture(!1),document.addEventListener("scroll",k,!1),n=window.setInterval(W,r.lmddOptions.calcInterval))}},r.lmddOptions.dragstartTimeout))))};return{init:function(t,n){t.lmdd||(h(t),t.lmdd=!0,t.lmddOptions=Object.assign({},e,n),S(t),t.addEventListener("mousedown",k,!1),window.addEventListener("mouseup",k,!1),document.addEventListener("drag",I,!1),document.addEventListener("dragstart",I,!1))},kill:function(e){e.lmdd&&(document.removeEventListener("drag",I,!1),document.removeEventListener("dragstart",I,!1),j(e),e.lmdd=!1,delete e.lmddOptions)}}}();